import{snakeSpeed,draw as drawSnake,update as updateSnake,getSnakeHead,snakeIntersection}from"./snake.min.js";import{update as updateFood,draw as drawFood}from"./food.min.js";import{outsideGrid}from"./grid.min.js";let lastRenderTime=0,gameOver=!1;const root=document.getElementById("root"),main=currentTime=>{if(gameOver)return void(confirm("You lost. Press ok to restart")&&(window.location="/"));window.requestAnimationFrame(main);const secSinceLastRender=(currentTime-lastRenderTime)/1e3;secSinceLastRender<1/snakeSpeed||(lastRenderTime=currentTime,update(),draw())};window.requestAnimationFrame(main);const update=()=>{updateSnake(),updateFood(root),checkDeath()},draw=()=>{root.innerHTML="",drawSnake(root),drawFood(root)},checkDeath=()=>{gameOver=outsideGrid(getSnakeHead())||snakeIntersection()};